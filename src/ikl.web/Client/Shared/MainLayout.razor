@using ikl.web.Shared
@inherits LayoutComponentBase
@inject DataService DataService

<MatAppBarContainer>
    <MatAppBar Fixed="true">
        <MatAppBarRow>
            <MatAppBarSection>
                <MatIconButton Icon="menu" OnClick="ButtonClicked" ></MatIconButton>
            </MatAppBarSection>
            <MatAppBarSection>
                <MatIconButton Icon="home" Link="/"></MatIconButton>
                <MatIconButton Icon="search" Link="/search"></MatIconButton>
                <MatAppBarTitle>IB KOFOD LARSEN</MatAppBarTitle>
            </MatAppBarSection>
            <MatAppBarSection Align="@MatAppBarSectionAlign.End">
                <MatIconButton Icon="info"></MatIconButton>
            </MatAppBarSection>
        </MatAppBarRow>
    </MatAppBar>
 
    <MatAppBarContent>
        <MatDrawerContainer Style="width: 100vw; height: 100vh;">
            <MatDrawer @bind-Opened="@_opened">
                <MatNavMenu>
                    @foreach (var customer in DataService.GetCustomers())
                    {
                        var drawings = DataService.GetDrawings(customer.Id);
                        // if no drawings, dont add nav item
                        if (!drawings.Any()) continue;
                        var link = "drawings?customerId=" + customer.Id;

                        <MatNavItem Href="@link" Class="hoverList" OnClick="() => _opened = false">@customer.Names[0]</MatNavItem>
                    }
                </MatNavMenu>
            </MatDrawer>
            <MatDrawerContent>
                @Body
            </MatDrawerContent>
        </MatDrawerContainer>
        
    </MatAppBarContent>
</MatAppBarContainer>
<style>
    .hoverList:hover {
        background-color: lightgray;
    }
</style>

@code {

    bool _opened = true;
 
    void ButtonClicked()
    {
        _opened = !_opened;
    }

}